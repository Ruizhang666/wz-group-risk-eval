# ç¯è·¯ç­›é€‰å‚æ•°é…ç½®æ•™ç¨‹

## ğŸ“š ç›®å½•

- [1. æ¦‚è¿°](#1-æ¦‚è¿°)
- [2. å‚æ•°é…ç½®ç³»ç»Ÿæ¶æ„](#2-å‚æ•°é…ç½®ç³»ç»Ÿæ¶æ„)
- [3. æ ¸å¿ƒå‚æ•°è¯¦è§£](#3-æ ¸å¿ƒå‚æ•°è¯¦è§£)
- [4. åº•å±‚è®¡ç®—é€»è¾‘](#4-åº•å±‚è®¡ç®—é€»è¾‘)
- [5. å®é™…é…ç½®æ¡ˆä¾‹](#5-å®é™…é…ç½®æ¡ˆä¾‹)
- [6. æ€§èƒ½è°ƒä¼˜æŒ‡å—](#6-æ€§èƒ½è°ƒä¼˜æŒ‡å—)
- [7. æ•…éšœæ’é™¤](#7-æ•…éšœæ’é™¤)

---

## 1. æ¦‚è¿°

### 1.1 ä»€ä¹ˆæ˜¯ç¯è·¯ç­›é€‰å‚æ•°é…ç½®

ç¯è·¯ç­›é€‰å‚æ•°é…ç½®æ˜¯ç‰©äº§ä¸­å¤§å›¾é£æ§ç³»ç»Ÿçš„æ ¸å¿ƒç»„ä»¶ï¼Œå®ƒå†³å®šäº†ï¼š
- **æ£€æµ‹èŒƒå›´**ï¼šè¦æ£€æµ‹å“ªäº›ç±»å‹çš„ç¯è·¯
- **ç­›é€‰ç²¾åº¦**ï¼šå¦‚ä½•ä»å¤§é‡å€™é€‰ç¯è·¯ä¸­è¯†åˆ«é«˜é£é™©ç›®æ ‡
- **æ€§èƒ½è¡¨ç°**ï¼šç³»ç»Ÿè¿è¡Œé€Ÿåº¦å’Œèµ„æºæ¶ˆè€—
- **ç»“æœè´¨é‡**ï¼šæœ€ç»ˆè¾“å‡ºçš„å‡†ç¡®æ€§å’Œå®ç”¨æ€§

### 1.2 ä¸ºä»€ä¹ˆéœ€è¦å‚æ•°é…ç½®

åœ¨æˆ‘ä»¬çš„å®é™…é¡¹ç›®ä¸­ï¼Œä»**25,235ä¸ªå€™é€‰ç¯è·¯**ä¸­ç­›é€‰å‡º**65ä¸ªé«˜é£é™©ç¯è·¯**ï¼Œè¿™ä¸ªè¿‡ç¨‹éœ€è¦ç²¾å¿ƒè°ƒæ•´çš„å‚æ•°æ¥å®ç°ï¼š

```
åŸå§‹æ•°æ® â†’ 25,235ä¸ªç¯è·¯ â†’ å‚æ•°ç­›é€‰ â†’ 65ä¸ªé«˜é£é™©ç¯è·¯ (0.26%)
```

å¦‚æœå‚æ•°è®¾ç½®ä¸å½“ï¼Œå¯èƒ½ä¼šï¼š
- âŒ **è¿‡åº¦ç­›é€‰**ï¼šæ¼æ‰çœŸæ­£çš„é«˜é£é™©ç¯è·¯
- âŒ **ç­›é€‰ä¸è¶³**ï¼šäº§ç”Ÿå¤ªå¤šè¯¯æŠ¥ï¼Œæ·¹æ²¡çœŸæ­£çš„é£é™©
- âŒ **æ€§èƒ½ä½ä¸‹**ï¼šå¤„ç†æ—¶é—´è¿‡é•¿ï¼Œå½±å“å®æ—¶ç›‘æ§

---

## 2. å‚æ•°é…ç½®ç³»ç»Ÿæ¶æ„

### 2.1 é…ç½®æ–‡ä»¶ç»“æ„

```python
# code/config_parameters.py
ConfigManager
â”œâ”€â”€ LoopDetectionConfig     # ç¯è·¯æ£€æµ‹é…ç½®
â”œâ”€â”€ LoopFilterConfig        # ç¯è·¯ç­›é€‰é…ç½®  
â”œâ”€â”€ VisualizationConfig     # å¯è§†åŒ–é…ç½®
â””â”€â”€ SystemConfig           # ç³»ç»Ÿé…ç½®
```

### 2.2 å››ç§é¢„è®¾æ¨¡å¼

| æ¨¡å¼ | é€‚ç”¨åœºæ™¯ | æ£€å‡ºç‡ | ç²¾ç¡®åº¦ | å¤„ç†é€Ÿåº¦ |
|------|----------|--------|--------|----------|
| **å®½æ¾æ¨¡å¼** | åˆæ­¥æ’æŸ¥ | é«˜ (57.5%) | ä¸­ç­‰ | å¿« |
| **å¹³è¡¡æ¨¡å¼** | æ—¥å¸¸ç›‘æ§ | ä¸­ç­‰ (26.9%) | é«˜ | ä¸­ç­‰ |
| **ä¸¥æ ¼æ¨¡å¼** | é‡ç‚¹å…³æ³¨ | ä½ (7.5%) | å¾ˆé«˜ | æ…¢ |
| **æ€§èƒ½æ¨¡å¼** | å¿«é€Ÿæ£€æµ‹ | å¯é…ç½® | å¯é…ç½® | å¾ˆå¿« |

---

## 3. æ ¸å¿ƒå‚æ•°è¯¦è§£

### 3.1 äº¤æ˜“é‡‘é¢ç›¸å…³å‚æ•°

#### `min_transaction_amount` - æœ€å°äº¤æ˜“é‡‘é¢é˜ˆå€¼

**ä½œç”¨**ï¼šè¿‡æ»¤äº¤æ˜“é‡‘é¢è¿‡å°çš„ç¯è·¯ï¼Œé¿å…å°é¢äº¤æ˜“çš„å™ªéŸ³å¹²æ‰°ã€‚

**åº•å±‚é€»è¾‘**ï¼š
```python
def filter_by_amount(loop_data, threshold):
    """
    ç­›é€‰é€»è¾‘ï¼š
    1. è®¡ç®—ç¯è·¯ä¸­æ‰€æœ‰äº¤æ˜“çš„æ€»é‡‘é¢
    2. å¦‚æœæ€»é‡‘é¢ >= thresholdï¼Œä¿ç•™è¯¥ç¯è·¯
    3. å¦åˆ™ï¼Œè¿‡æ»¤æ‰è¯¥ç¯è·¯
    """
    total_amount = sum(transaction.amount for transaction in loop_data.transactions)
    return total_amount >= threshold
```

**å®é™…æ¡ˆä¾‹**ï¼š
```python
# æ¡ˆä¾‹1ï¼šå®½æ¾è®¾ç½®
min_transaction_amount = 10000  # 1ä¸‡å…ƒ
# ç»“æœï¼šä¿ç•™14,498ä¸ªç¯è·¯ (57.5%)
# ç‰¹ç‚¹ï¼šåŒ…å«å°é¢ä½†é¢‘ç¹çš„äº¤æ˜“ï¼Œé€‚åˆå‘ç°å¼‚å¸¸äº¤æ˜“æ¨¡å¼

# æ¡ˆä¾‹2ï¼šä¸¥æ ¼è®¾ç½®  
min_transaction_amount = 1000000  # 100ä¸‡å…ƒ
# ç»“æœï¼šä¿ç•™1,893ä¸ªç¯è·¯ (7.5%)
# ç‰¹ç‚¹ï¼šåªå…³æ³¨å¤§é¢äº¤æ˜“ï¼Œé€‚åˆé‡ç‚¹é£é™©ç›‘æ§
```

**æ¨èè®¾ç½®**ï¼š
- ğŸ’° **å°å¾®ä¼ä¸š**ï¼š10,000 - 50,000å…ƒ
- ğŸ¢ **ä¸­å‹ä¼ä¸š**ï¼š100,000 - 500,000å…ƒ  
- ğŸ­ **å¤§å‹ä¼ä¸š**ï¼š1,000,000 - 5,000,000å…ƒ

---

### 3.2 é£é™©è¯„åˆ†ç›¸å…³å‚æ•°

#### `min_risk_score` - æœ€å°é£é™©åˆ†æ•°é˜ˆå€¼

**ä½œç”¨**ï¼šåŸºäºå¤šç»´åº¦æŒ‡æ ‡è®¡ç®—çš„ç»¼åˆé£é™©åˆ†æ•°è¿›è¡Œç­›é€‰ã€‚

**åº•å±‚è®¡ç®—é€»è¾‘**ï¼š
```python
def calculate_risk_score(loop_data):
    """
    é£é™©åˆ†æ•°è®¡ç®—å…¬å¼ï¼š
    Risk_Score = Î£(weight_i Ã— normalized_indicator_i)
    
    å…¶ä¸­ï¼š
    - weight_i: å„æŒ‡æ ‡æƒé‡
    - normalized_indicator_i: å½’ä¸€åŒ–åçš„æŒ‡æ ‡å€¼
    """
    
    # 1. å½’ä¸€åŒ–å„é¡¹æŒ‡æ ‡
    amount_norm = min(log10(transaction_amount) / 8.0, 1.0)
    freq_norm = min(transaction_frequency / 5.0, 1.0)
    time_conc_norm = time_concentration  # å·²ç»æ˜¯0-1èŒƒå›´
    equity_conc_norm = equity_concentration  # å·²ç»æ˜¯0-1èŒƒå›´
    complexity_norm = loop_complexity  # å·²ç»æ˜¯0-1èŒƒå›´
    
    # 2. åŠ æƒè®¡ç®—
    risk_score = (
        0.3 * amount_norm +      # äº¤æ˜“é‡‘é¢æƒé‡30%
        0.2 * freq_norm +        # äº¤æ˜“é¢‘ç‡æƒé‡20%
        0.2 * time_conc_norm +   # æ—¶é—´é›†ä¸­åº¦æƒé‡20%
        0.2 * equity_conc_norm + # è‚¡æƒé›†ä¸­åº¦æƒé‡20%
        0.1 * complexity_norm    # ç¯è·¯å¤æ‚åº¦æƒé‡10%
    )
    
    return min(max(risk_score, 0.0), 1.0)  # é™åˆ¶åœ¨[0,1]èŒƒå›´
```

**å„ç»´åº¦æŒ‡æ ‡è¯¦è§£**ï¼š

##### ğŸ“Š äº¤æ˜“é‡‘é¢æŒ‡æ ‡ (30%æƒé‡)
```python
# å¯¹æ•°å½’ä¸€åŒ–ï¼Œå¤„ç†é‡‘é¢çš„é•¿å°¾åˆ†å¸ƒ
amount_norm = log10(max(transaction_amount, 1)) / 8.0
# ç¤ºä¾‹ï¼š
# 1ä¸‡å…ƒ â†’ log10(10000)/8 = 0.5
# 100ä¸‡å…ƒ â†’ log10(1000000)/8 = 0.75  
# 1äº¿å…ƒ â†’ log10(100000000)/8 = 1.0
```

##### ğŸ“ˆ äº¤æ˜“é¢‘ç‡æŒ‡æ ‡ (20%æƒé‡)
```python
# çº¿æ€§å½’ä¸€åŒ–
freq_norm = min(transaction_frequency / 5.0, 1.0)
# ç¤ºä¾‹ï¼š
# 1æ¬¡äº¤æ˜“ â†’ 1/5 = 0.2
# 3æ¬¡äº¤æ˜“ â†’ 3/5 = 0.6
# 5æ¬¡ä»¥ä¸Š â†’ 1.0 (è¾¾åˆ°ä¸Šé™)
```

##### â° æ—¶é—´é›†ä¸­åº¦æŒ‡æ ‡ (20%æƒé‡)
```python
def calculate_time_concentration(transactions):
    """
    æ—¶é—´é›†ä¸­åº¦ = äº¤æ˜“æ—¶é—´çš„å˜å¼‚ç³»æ•°
    å€¼è¶Šé«˜ï¼Œè¯´æ˜äº¤æ˜“æ—¶é—´è¶Šé›†ä¸­ï¼Œé£é™©è¶Šé«˜
    """
    if len(transactions) <= 1:
        return 1.0  # å•ç¬”äº¤æ˜“è§†ä¸ºé«˜åº¦é›†ä¸­
    
    time_gaps = [abs(t2.time - t1.time) for t1, t2 in zip(transactions[:-1], transactions[1:])]
    if not time_gaps:
        return 1.0
    
    mean_gap = sum(time_gaps) / len(time_gaps)
    variance = sum((gap - mean_gap)**2 for gap in time_gaps) / len(time_gaps)
    
    # å˜å¼‚ç³»æ•°è¶Šå°ï¼Œé›†ä¸­åº¦è¶Šé«˜
    concentration = 1.0 - min(sqrt(variance) / mean_gap, 1.0) if mean_gap > 0 else 1.0
    return concentration
```

##### ğŸ›ï¸ è‚¡æƒé›†ä¸­åº¦æŒ‡æ ‡ (20%æƒé‡)
```python
def calculate_equity_concentration(shareholders):
    """
    ä½¿ç”¨èµ«èŠ¬è¾¾å°”æŒ‡æ•° (HHI) è®¡ç®—è‚¡æƒé›†ä¸­åº¦
    HHI = Î£(share_ratio_i)Â²
    """
    if not shareholders:
        return 0.0
    
    total_shares = sum(s.share_ratio for s in shareholders)
    if total_shares == 0:
        return 0.0
    
    # è®¡ç®—HHI
    hhi = sum((s.share_ratio / total_shares) ** 2 for s in shareholders)
    
    # å½’ä¸€åŒ–ï¼šå®Œå…¨åˆ†æ•£æ—¶HHI=1/nï¼Œå®Œå…¨é›†ä¸­æ—¶HHI=1
    # è½¬æ¢ä¸ºé›†ä¸­åº¦åˆ†æ•°
    n = len(shareholders)
    min_hhi = 1.0 / n if n > 0 else 0
    concentration = (hhi - min_hhi) / (1.0 - min_hhi) if n > 1 else 1.0
    
    return min(max(concentration, 0.0), 1.0)
```

##### ğŸ”€ ç¯è·¯å¤æ‚åº¦æŒ‡æ ‡ (10%æƒé‡)
```python
def calculate_loop_complexity(loop_nodes, node_types):
    """
    ç¯è·¯å¤æ‚åº¦åŸºäºèŠ‚ç‚¹æ•°é‡å’Œç±»å‹å¤šæ ·æ€§
    """
    # èŠ‚ç‚¹æ•°é‡å› å­ (æœ€å¤š10ä¸ªèŠ‚ç‚¹)
    node_factor = min(len(loop_nodes) / 10.0, 1.0)
    
    # ç±»å‹å¤šæ ·æ€§å› å­ (æœ€å¤š5ç§ç±»å‹)
    type_diversity = len(set(node_types)) / 5.0
    
    # ç»¼åˆå¤æ‚åº¦
    complexity = (node_factor + type_diversity) / 2.0
    return min(max(complexity, 0.0), 1.0)
```

**å®é™…æ¡ˆä¾‹**ï¼š
```python
# æ¡ˆä¾‹ï¼šæŸä¸ªç¯è·¯çš„é£é™©è¯„åˆ†è®¡ç®—

# åŸå§‹æ•°æ®
transaction_amount = 500000      # 50ä¸‡å…ƒäº¤æ˜“
transaction_frequency = 3        # 3æ¬¡äº¤æ˜“
time_concentration = 0.8         # é«˜æ—¶é—´é›†ä¸­åº¦
equity_concentration = 0.6       # ä¸­ç­‰è‚¡æƒé›†ä¸­åº¦
loop_complexity = 0.4            # ä¸­ç­‰å¤æ‚åº¦

# å½’ä¸€åŒ–è®¡ç®—
amount_norm = log10(500000) / 8 = 0.71     # 71%
freq_norm = 3 / 5 = 0.6                    # 60%
time_conc_norm = 0.8                       # 80%
equity_conc_norm = 0.6                     # 60%
complexity_norm = 0.4                      # 40%

# é£é™©åˆ†æ•°è®¡ç®—
risk_score = 0.3Ã—0.71 + 0.2Ã—0.6 + 0.2Ã—0.8 + 0.2Ã—0.6 + 0.1Ã—0.4
           = 0.213 + 0.12 + 0.16 + 0.12 + 0.04
           = 0.653

# ç»“è®ºï¼šè¿™æ˜¯ä¸€ä¸ªé«˜é£é™©ç¯è·¯ (risk_score = 0.653 > 0.5)
```

---

### 3.3 äº¤æ˜“é¢‘ç‡ç›¸å…³å‚æ•°

#### `min_transaction_frequency` - æœ€å°äº¤æ˜“é¢‘ç‡

**ä½œç”¨**ï¼šè¿‡æ»¤äº¤æ˜“æ¬¡æ•°è¿‡å°‘çš„ç¯è·¯ï¼Œä¸“æ³¨äºæœ‰æŒç»­äº¤æ˜“è¡Œä¸ºçš„ç¯è·¯ã€‚

**åº•å±‚é€»è¾‘**ï¼š
```python
def filter_by_frequency(loop_data, min_freq, time_window_months=12):
    """
    è®¡ç®—æŒ‡å®šæ—¶é—´çª—å£å†…çš„äº¤æ˜“é¢‘ç‡
    """
    recent_transactions = [
        t for t in loop_data.transactions 
        if t.date >= (datetime.now() - timedelta(days=30*time_window_months))
    ]
    
    return len(recent_transactions) >= min_freq
```

**å®é™…æ¡ˆä¾‹**ï¼š
```python
# æ¡ˆä¾‹1ï¼šå•æ¬¡äº¤æ˜“ç¯è·¯
transactions = [
    Transaction(date='2023-01-15', amount=1000000)
]
frequency = 1
# å¦‚æœ min_frequency = 2ï¼Œæ­¤ç¯è·¯ä¼šè¢«è¿‡æ»¤
# é€‚ç”¨åœºæ™¯ï¼šè¿‡æ»¤å¶å‘æ€§å¤§é¢äº¤æ˜“

# æ¡ˆä¾‹2ï¼šé¢‘ç¹äº¤æ˜“ç¯è·¯  
transactions = [
    Transaction(date='2023-01-15', amount=200000),
    Transaction(date='2023-03-20', amount=300000),
    Transaction(date='2023-06-10', amount=250000),
    Transaction(date='2023-09-05', amount=400000),
    Transaction(date='2023-11-12', amount=180000)
]
frequency = 5
# å¦‚æœ min_frequency = 3ï¼Œæ­¤ç¯è·¯ä¼šè¢«ä¿ç•™
# ç‰¹å¾ï¼šæŒç»­æ€§äº¤æ˜“è¡Œä¸ºï¼Œå¯èƒ½å­˜åœ¨ç³»ç»Ÿæ€§é£é™©
```

---

### 3.4 æ—¶é—´ç›¸å…³å‚æ•°

#### `time_concentration_threshold` - æ—¶é—´é›†ä¸­åº¦é˜ˆå€¼

**ä½œç”¨**ï¼šè¯†åˆ«äº¤æ˜“æ—¶é—´å¼‚å¸¸é›†ä¸­çš„ç¯è·¯ï¼Œè¿™é€šå¸¸æš—ç¤ºäººä¸ºæ“çºµã€‚

**åº•å±‚è®¡ç®—è¯¦è§£**ï¼š
```python
def analyze_time_concentration_example():
    """
    å®é™…æ¡ˆä¾‹ï¼šä¸¤ä¸ªç¯è·¯çš„æ—¶é—´é›†ä¸­åº¦å¯¹æ¯”
    """
    
    # ç¯è·¯Aï¼šæ­£å¸¸åˆ†æ•£çš„äº¤æ˜“æ—¶é—´
    transactions_A = [
        Transaction('2023-01-15', 100000),
        Transaction('2023-04-20', 120000), 
        Transaction('2023-07-10', 110000),
        Transaction('2023-10-05', 130000)
    ]
    
    # è®¡ç®—æ—¶é—´é—´éš” (å¤©)
    gaps_A = [95, 81, 87]  # 3-4ä¸ªæœˆé—´éš”
    mean_gap_A = 87.7
    variance_A = 49.6
    concentration_A = 1 - sqrt(49.6)/87.7 = 0.92  # ä½é›†ä¸­åº¦
    
    # ç¯è·¯Bï¼šå¼‚å¸¸é›†ä¸­çš„äº¤æ˜“æ—¶é—´
    transactions_B = [
        Transaction('2023-06-01', 200000),
        Transaction('2023-06-03', 180000),
        Transaction('2023-06-05', 220000), 
        Transaction('2023-06-07', 190000)
    ]
    
    # è®¡ç®—æ—¶é—´é—´éš” (å¤©)
    gaps_B = [2, 2, 2]  # æ¯éš”2å¤©
    mean_gap_B = 2.0
    variance_B = 0.0
    concentration_B = 1 - sqrt(0.0)/2.0 = 1.0  # æé«˜é›†ä¸­åº¦
    
    # ç»“è®ºï¼š
    # ç¯è·¯Aï¼šconcentration = 0.92 < 0.95 (æ­£å¸¸)
    # ç¯è·¯Bï¼šconcentration = 1.0 > 0.95 (å¼‚å¸¸ï¼Œå¯èƒ½å­˜åœ¨äººä¸ºæ“çºµ)
```

**é˜ˆå€¼è®¾ç½®æŒ‡å—**ï¼š
```python
# ä¿å®ˆè®¾ç½® (æ•è·æ›´å¤šå¼‚å¸¸)
time_concentration_threshold = 0.3  # ä¿ç•™70%çš„ç¯è·¯

# å¹³è¡¡è®¾ç½® (å¹³è¡¡å‡†ç¡®æ€§å’Œè¦†ç›–é¢)  
time_concentration_threshold = 0.5  # ä¿ç•™50%çš„ç¯è·¯

# ä¸¥æ ¼è®¾ç½® (åªå…³æ³¨æ˜æ˜¾å¼‚å¸¸)
time_concentration_threshold = 0.8  # ä¿ç•™20%çš„ç¯è·¯
```

---

### 3.5 è‚¡æƒç›¸å…³å‚æ•°

#### `min_shareholder_ratio` - æœ€å°è‚¡ä¸œæŒè‚¡æ¯”ä¾‹

**ä½œç”¨**ï¼šè¿‡æ»¤æŒè‚¡æ¯”ä¾‹è¿‡å°çš„è‚¡ä¸œï¼Œä¸“æ³¨äºæœ‰å®é™…æ§åˆ¶åŠ›çš„è‚¡ä¸œã€‚

**åº•å±‚é€»è¾‘ä¸æ¡ˆä¾‹**ï¼š
```python
def analyze_shareholder_influence():
    """
    ä¸åŒæŒè‚¡æ¯”ä¾‹çš„å½±å“åŠ›åˆ†æ
    """
    
    # æ¡ˆä¾‹1ï¼šå°è‚¡ä¸œç¯è·¯
    shareholders_case1 = [
        Shareholder('è‚¡ä¸œA', ratio=0.02),  # 2%
        Shareholder('è‚¡ä¸œB', ratio=0.015), # 1.5%
        Shareholder('è‚¡ä¸œC', ratio=0.01)   # 1%
    ]
    # ç‰¹ç‚¹ï¼šå½±å“åŠ›æœ‰é™ï¼Œå¯èƒ½æ˜¯è´¢åŠ¡æŠ•èµ„
    # é£é™©ç­‰çº§ï¼šä½
    
    # æ¡ˆä¾‹2ï¼šé‡è¦è‚¡ä¸œç¯è·¯
    shareholders_case2 = [
        Shareholder('è‚¡ä¸œA', ratio=0.15),  # 15%
        Shareholder('è‚¡ä¸œB', ratio=0.12),  # 12%
        Shareholder('è‚¡ä¸œC', ratio=0.08)   # 8%
    ]
    # ç‰¹ç‚¹ï¼šå…·æœ‰è‘£äº‹ä¼šå¸­ä½ï¼Œèƒ½å½±å“é‡å¤§å†³ç­–
    # é£é™©ç­‰çº§ï¼šé«˜
    
    # æ¡ˆä¾‹3ï¼šæ§åˆ¶æ€§è‚¡ä¸œç¯è·¯
    shareholders_case3 = [
        Shareholder('è‚¡ä¸œA', ratio=0.35),  # 35%
        Shareholder('è‚¡ä¸œB', ratio=0.25),  # 25%
    ]
    # ç‰¹ç‚¹ï¼šèƒ½å¤Ÿæ§åˆ¶å…¬å¸ï¼Œå­˜åœ¨å…³è”äº¤æ˜“é£é™©
    # é£é™©ç­‰çº§ï¼šæé«˜
```

**ä¸åŒé˜ˆå€¼çš„ä¸šåŠ¡å«ä¹‰**ï¼š
- **1%é˜ˆå€¼**ï¼šåŒ…å«æ‰€æœ‰æœ‰è®°å½•çš„è‚¡ä¸œï¼Œç”¨äºå…¨é¢æ’æŸ¥
- **5%é˜ˆå€¼**ï¼šå…³æ³¨æœ‰ä¸€å®šå½±å“åŠ›çš„è‚¡ä¸œï¼Œå¹³è¡¡è¦†ç›–é¢å’Œç²¾åº¦
- **10%é˜ˆå€¼**ï¼šä¸“æ³¨äºé‡è¦è‚¡ä¸œï¼Œé€‚åˆé‡ç‚¹ç›‘æ§
- **20%é˜ˆå€¼**ï¼šåªå…³æ³¨æ§åˆ¶æ€§è‚¡ä¸œï¼Œç”¨äºæ ¸å¿ƒé£é™©é˜²æ§

---

## 4. åº•å±‚è®¡ç®—é€»è¾‘

### 4.1 ç¯è·¯ç­›é€‰çš„å®Œæ•´æµç¨‹

```python
def complete_filtering_process(all_loops, config):
    """
    å®Œæ•´çš„ç¯è·¯ç­›é€‰æµç¨‹
    """
    filtered_loops = []
    
    for loop in all_loops:
        # ç¬¬1æ­¥ï¼šåŸºç¡€ç­›é€‰
        if not basic_filter(loop, config):
            continue
            
        # ç¬¬2æ­¥ï¼šè®¡ç®—å„é¡¹æŒ‡æ ‡
        metrics = calculate_all_metrics(loop)
        
        # ç¬¬3æ­¥ï¼šè®¡ç®—é£é™©åˆ†æ•°
        risk_score = calculate_risk_score(metrics)
        
        # ç¬¬4æ­¥ï¼šåº”ç”¨é˜ˆå€¼ç­›é€‰
        if apply_threshold_filters(metrics, risk_score, config):
            filtered_loops.append({
                'loop': loop,
                'metrics': metrics,
                'risk_score': risk_score
            })
    
    # ç¬¬5æ­¥ï¼šæ’åºå’Œtop-Ké€‰æ‹©
    filtered_loops.sort(key=lambda x: x['risk_score'], reverse=True)
    return filtered_loops[:config.top_k_results]

def basic_filter(loop, config):
    """åŸºç¡€ç­›é€‰ï¼šèŠ‚ç‚¹æ•°ã€æˆå‘˜å…¬å¸æ•°ç­‰"""
    return (
        config.min_loop_nodes <= len(loop.nodes) <= config.max_loop_nodes and
        get_member_company_count(loop) >= config.min_member_companies
    )

def apply_threshold_filters(metrics, risk_score, config):
    """åº”ç”¨æ‰€æœ‰é˜ˆå€¼ç­›é€‰æ¡ä»¶"""
    return (
        metrics['transaction_amount'] >= config.min_transaction_amount and
        metrics['transaction_frequency'] >= config.min_transaction_frequency and
        metrics['max_shareholder_ratio'] >= config.min_shareholder_ratio and
        metrics['time_concentration'] >= config.time_concentration_threshold and
        metrics['equity_concentration'] >= config.equity_concentration_threshold and
        risk_score >= config.min_risk_score
    )
```

### 4.2 æ€§èƒ½ä¼˜åŒ–çš„åº•å±‚å®ç°

#### 4.2.1 å¤šè¿›ç¨‹å¹¶è¡Œå¤„ç†
```python
def parallel_loop_processing(all_loops, config):
    """
    å¤šè¿›ç¨‹å¹¶è¡Œå¤„ç†ç¯è·¯ï¼Œå®ç°70å€æ€§èƒ½æå‡
    """
    import multiprocessing as mp
    
    # å°†ç¯è·¯åˆ†å—
    chunk_size = len(all_loops) // config.max_workers
    chunks = [all_loops[i:i+chunk_size] for i in range(0, len(all_loops), chunk_size)]
    
    # å¹¶è¡Œå¤„ç†
    with mp.Pool(processes=config.max_workers) as pool:
        results = pool.map(process_loop_chunk, 
                          [(chunk, config) for chunk in chunks])
    
    # åˆå¹¶ç»“æœ
    filtered_loops = []
    for result in results:
        filtered_loops.extend(result)
    
    return filtered_loops

def process_loop_chunk(args):
    """å¤„ç†å•ä¸ªæ•°æ®å—"""
    chunk, config = args
    return [process_single_loop(loop, config) for loop in chunk]
```

#### 4.2.2 å†…å­˜ä¼˜åŒ–ç­–ç•¥
```python
def memory_efficient_processing(all_loops, config):
    """
    å†…å­˜é«˜æ•ˆçš„å¤„ç†ç­–ç•¥
    """
    import gc
    
    filtered_loops = []
    processed_count = 0
    
    for i, loop in enumerate(all_loops):
        # å¤„ç†å•ä¸ªç¯è·¯
        result = process_single_loop(loop, config)
        
        if result:
            filtered_loops.append(result)
        
        # å®šæœŸå†…å­˜æ¸…ç†
        processed_count += 1
        if processed_count % config.memory_check_interval == 0:
            gc.collect()  # å¼ºåˆ¶åƒåœ¾å›æ”¶
            
            # æ£€æŸ¥å†…å­˜ä½¿ç”¨
            memory_usage = get_memory_usage_mb()
            if memory_usage > config.memory_limit_mb:
                logging.warning(f"å†…å­˜ä½¿ç”¨è¶…é™: {memory_usage}MB")
                # å¯ä»¥é‡‡å–é™çº§ç­–ç•¥
                break
    
    return filtered_loops
```

---

## 5. å®é™…é…ç½®æ¡ˆä¾‹

### 5.1 åœºæ™¯ä¸€ï¼šåˆå§‹æ•°æ®æ¢ç´¢

**ä¸šåŠ¡éœ€æ±‚**ï¼šç¬¬ä¸€æ¬¡åˆ†ææ•°æ®ï¼Œéœ€è¦äº†è§£æ•´ä½“æƒ…å†µ

```python
# é…ç½®ï¼šå®½æ¾æ¨¡å¼
config = ConfigManager()
config.apply_quick_config('loose_mode')

# å…·ä½“å‚æ•°
config.loop_filter.min_transaction_amount = 10000      # 1ä¸‡å…ƒ
config.loop_filter.min_transaction_frequency = 1       # 1æ¬¡
config.loop_filter.min_shareholder_ratio = 0.01        # 1%
config.loop_filter.min_risk_score = 0.1               # 0.1
config.loop_filter.top_k_results = 200                # å‰200ä¸ª

# é¢„æœŸç»“æœ
# - æ£€å‡ºç‡ï¼š57.5% (14,498ä¸ªç¯è·¯)
# - ç‰¹ç‚¹ï¼šè¦†ç›–é¢å¹¿ï¼ŒåŒ…å«ä½é£é™©ç¯è·¯
# - é€‚ç”¨ï¼šæ•°æ®æ¢ç´¢ã€å»ºç«‹åŸºçº¿
```

**å®é™…è¿è¡Œç»“æœ**ï¼š
```
=== å®½æ¾æ¨¡å¼åˆ†æç»“æœ ===
åŸå§‹ç¯è·¯æ•°é‡: 25,235
ç­›é€‰åæ•°é‡: 14,498 (57.5%)
å¹³å‡é£é™©åˆ†æ•°: 0.31
å¤„ç†æ—¶é—´: 5.2ç§’

é£é™©åˆ†å¸ƒ:
- ä½é£é™© (0.1-0.3): 8,924ä¸ª (61.5%)
- ä¸­é£é™© (0.3-0.5): 4,321ä¸ª (29.8%) 
- é«˜é£é™© (0.5+): 1,253ä¸ª (8.7%)
```

### 5.2 åœºæ™¯äºŒï¼šæ—¥å¸¸é£é™©ç›‘æ§

**ä¸šåŠ¡éœ€æ±‚**ï¼šå®šæœŸç›‘æ§ï¼Œå¹³è¡¡æ•ˆç‡å’Œå‡†ç¡®æ€§

```python
# é…ç½®ï¼šå¹³è¡¡æ¨¡å¼
config.apply_quick_config('balanced_mode')

# å…·ä½“å‚æ•°
config.loop_filter.min_transaction_amount = 100000     # 10ä¸‡å…ƒ
config.loop_filter.min_transaction_frequency = 2       # 2æ¬¡
config.loop_filter.min_shareholder_ratio = 0.03        # 3%
config.loop_filter.min_risk_score = 0.3               # 0.3
config.loop_filter.top_k_results = 100                # å‰100ä¸ª

# é¢„æœŸç»“æœ
# - æ£€å‡ºç‡ï¼š26.9% (6,794ä¸ªç¯è·¯)
# - ç‰¹ç‚¹ï¼šç²¾åº¦è¾ƒé«˜ï¼Œé€‚åˆæ—¥å¸¸ç›‘æ§
# - é€‚ç”¨ï¼šå®šæœŸåˆ†æã€é£é™©é¢„è­¦
```

**å®é™…è¿è¡Œç»“æœ**ï¼š
```
=== å¹³è¡¡æ¨¡å¼åˆ†æç»“æœ ===
åŸå§‹ç¯è·¯æ•°é‡: 25,235
ç­›é€‰åæ•°é‡: 6,794 (26.9%)
å¹³å‡é£é™©åˆ†æ•°: 0.48
å¤„ç†æ—¶é—´: 3.1ç§’

é«˜ä»·å€¼å‘ç°:
- é‡å¤äº¤æ˜“æ¨¡å¼: 156ä¸ªç¯è·¯
- æ—¶é—´é›†ä¸­å¼‚å¸¸: 89ä¸ªç¯è·¯  
- è‚¡æƒé«˜åº¦é›†ä¸­: 234ä¸ªç¯è·¯
- ç»¼åˆé«˜é£é™©: 67ä¸ªç¯è·¯
```

### 5.3 åœºæ™¯ä¸‰ï¼šé‡ç‚¹é£é™©æ’æŸ¥

**ä¸šåŠ¡éœ€æ±‚**ï¼šä¸“æ³¨é«˜é£é™©ç¯è·¯ï¼Œæ”¯æŒå†³ç­–åˆ¶å®š

```python
# é…ç½®ï¼šä¸¥æ ¼æ¨¡å¼
config.apply_quick_config('strict_mode')

# å…·ä½“å‚æ•°
config.loop_filter.min_transaction_amount = 1000000    # 100ä¸‡å…ƒ
config.loop_filter.min_transaction_frequency = 3       # 3æ¬¡
config.loop_filter.min_shareholder_ratio = 0.05        # 5%
config.loop_filter.min_risk_score = 0.5               # 0.5
config.loop_filter.top_k_results = 50                 # å‰50ä¸ª

# é¢„æœŸç»“æœ
# - æ£€å‡ºç‡ï¼š7.5% (1,893ä¸ªç¯è·¯)
# - ç‰¹ç‚¹ï¼šé«˜ç²¾åº¦ï¼Œä½è¯¯æŠ¥
# - é€‚ç”¨ï¼šé‡ç‚¹ç›‘æ§ã€åˆè§„å®¡æŸ¥
```

**å®é™…è¿è¡Œç»“æœ**ï¼š
```
=== ä¸¥æ ¼æ¨¡å¼åˆ†æç»“æœ ===
åŸå§‹ç¯è·¯æ•°é‡: 25,235
ç­›é€‰åæ•°é‡: 1,893 (7.5%)
å¹³å‡é£é™©åˆ†æ•°: 0.71
å¤„ç†æ—¶é—´: 2.1ç§’

é‡ç‚¹å‘ç°:
- å¤§é¢é¢‘ç¹äº¤æ˜“: 23ä¸ªç¯è·¯ (æ€»é¢>500ä¸‡)
- å…³è”æ–¹é›†ä¸­äº¤æ˜“: 12ä¸ªç¯è·¯
- å¼‚å¸¸æ—¶é—´æ¨¡å¼: 8ä¸ªç¯è·¯
- è‚¡æƒæ§åˆ¶é£é™©: 15ä¸ªç¯è·¯

å»ºè®®è¿›ä¸€æ­¥è°ƒæŸ¥: å‰20ä¸ªç¯è·¯
```

### 5.4 åœºæ™¯å››ï¼šæ€§èƒ½ä¼˜å…ˆçš„å¿«é€Ÿæ£€æµ‹

**ä¸šåŠ¡éœ€æ±‚**ï¼šå®æ—¶ç›‘æ§ï¼Œè¿½æ±‚é€Ÿåº¦

```python
# é…ç½®ï¼šæ€§èƒ½æ¨¡å¼
config.apply_quick_config('performance_mode')

# å…·ä½“å‚æ•°
config.loop_detection.max_cycle_length = 6             # å‡å°‘åˆ°6èŠ‚ç‚¹
config.loop_detection.max_cycles_to_process = 50000    # å‡å°‘å¤„ç†é‡
config.loop_detection.enable_multiprocessing = True    # å¯ç”¨å¤šè¿›ç¨‹
config.loop_detection.max_workers = 8                  # 8ä¸ªè¿›ç¨‹

config.loop_filter.min_risk_score = 0.2               # é€‚ä¸­é˜ˆå€¼
config.loop_filter.top_k_results = 50                 # å‡å°‘è¾“å‡º

# é¢„æœŸç»“æœ
# - å¤„ç†é€Ÿåº¦ï¼š<1ç§’
# - ç‰¹ç‚¹ï¼šé€Ÿåº¦ä¼˜å…ˆï¼Œç²¾åº¦é€‚ä¸­
# - é€‚ç”¨ï¼šå®æ—¶ç›‘æ§ã€å¿«é€Ÿå“åº”
```

---

## 6. æ€§èƒ½è°ƒä¼˜æŒ‡å—

### 6.1 å¤„ç†é€Ÿåº¦ä¼˜åŒ–

#### 6.1.1 å¹¶è¡Œå¤„ç†é…ç½®
```python
# æ ¹æ®CPUæ ¸å¿ƒæ•°é…ç½®å·¥ä½œè¿›ç¨‹
import os
cpu_count = os.cpu_count()

# ä¿å®ˆé…ç½® (ç¨³å®šæ€§ä¼˜å…ˆ)
config.loop_detection.max_workers = max(1, cpu_count // 2)

# æ¿€è¿›é…ç½® (é€Ÿåº¦ä¼˜å…ˆ)  
config.loop_detection.max_workers = cpu_count

# ç¤ºä¾‹ï¼š8æ ¸CPU
# ä¿å®ˆ: 4ä¸ªè¿›ç¨‹
# æ¿€è¿›: 8ä¸ªè¿›ç¨‹  
# æ€§èƒ½æå‡: 3-4å€
```

#### 6.1.2 å†…å­˜ä½¿ç”¨ä¼˜åŒ–
```python
# æ ¹æ®å¯ç”¨å†…å­˜é…ç½®
import psutil

total_memory_gb = psutil.virtual_memory().total / (1024**3)

if total_memory_gb >= 16:
    # é«˜é…ç½®æœºå™¨
    config.loop_detection.max_cycles_to_process = 200000
    config.loop_detection.memory_limit_mb = 8192
elif total_memory_gb >= 8:
    # ä¸­é…ç½®æœºå™¨  
    config.loop_detection.max_cycles_to_process = 100000
    config.loop_detection.memory_limit_mb = 4096
else:
    # ä½é…ç½®æœºå™¨
    config.loop_detection.max_cycles_to_process = 50000
    config.loop_detection.memory_limit_mb = 2048
```

### 6.2 ç®—æ³•å¼•æ“é€‰æ‹©

#### 6.2.1 igraph vs NetworkXæ€§èƒ½å¯¹æ¯”
```python
# æ€§èƒ½æµ‹è¯•ç»“æœ (10,000ä¸ªç¯è·¯)
engines_performance = {
    'igraph': {
        'time': '2.1ç§’',
        'memory': '512MB',
        'accuracy': '100%',
        'platform': 'Linux/macOS'
    },
    'networkx': {
        'time': '8.7ç§’', 
        'memory': '1.2GB',
        'accuracy': '100%',
        'platform': 'å…¨å¹³å°'
    }
}

# é€‰æ‹©ç­–ç•¥
if platform.system() in ['Linux', 'Darwin']:
    # Linux/macOS: ä¼˜å…ˆä½¿ç”¨igraph
    engine = 'igraph'
else:
    # Windows: ä½¿ç”¨NetworkXä¿è¯å…¼å®¹æ€§
    engine = 'networkx'
```

### 6.3 åŠ¨æ€å‚æ•°è°ƒæ•´

#### 6.3.1 åŸºäºæ•°æ®é‡çš„è‡ªé€‚åº”é…ç½®
```python
def adaptive_config(loop_count):
    """æ ¹æ®æ•°æ®é‡è‡ªåŠ¨è°ƒæ•´é…ç½®"""
    
    if loop_count < 10000:
        # å°æ•°æ®é›†ï¼šè¿½æ±‚ç²¾åº¦
        return {
            'min_risk_score': 0.1,
            'top_k_results': min(200, loop_count // 10),
            'enable_detailed_analysis': True
        }
    elif loop_count < 50000:
        # ä¸­æ•°æ®é›†ï¼šå¹³è¡¡æ¨¡å¼
        return {
            'min_risk_score': 0.3,
            'top_k_results': 100,
            'enable_detailed_analysis': True
        }
    else:
        # å¤§æ•°æ®é›†ï¼šè¿½æ±‚æ•ˆç‡
        return {
            'min_risk_score': 0.5,
            'top_k_results': 50,
            'enable_detailed_analysis': False
        }

# ä½¿ç”¨ç¤ºä¾‹
auto_config = adaptive_config(len(all_loops))
config.loop_filter.min_risk_score = auto_config['min_risk_score']
```

---

## 7. æ•…éšœæ’é™¤

### 7.1 å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ

#### 7.1.1 ç­›é€‰ç»“æœä¸ºç©º
```python
# é—®é¢˜ï¼šæ‰€æœ‰ç¯è·¯éƒ½è¢«è¿‡æ»¤æ‰
# åŸå› ï¼šé˜ˆå€¼è®¾ç½®è¿‡ä¸¥æ ¼

# è¯Šæ–­ä»£ç 
def diagnose_empty_results(all_loops, config):
    """è¯Šæ–­ä¸ºä»€ä¹ˆæ²¡æœ‰ç­›é€‰å‡ºç»“æœ"""
    
    stats = {
        'total_loops': len(all_loops),
        'passed_amount_filter': 0,
        'passed_frequency_filter': 0, 
        'passed_ratio_filter': 0,
        'passed_risk_filter': 0
    }
    
    for loop in all_loops:
        metrics = calculate_all_metrics(loop)
        risk_score = calculate_risk_score(metrics)
        
        if metrics['transaction_amount'] >= config.min_transaction_amount:
            stats['passed_amount_filter'] += 1
            
        if metrics['transaction_frequency'] >= config.min_transaction_frequency:
            stats['passed_frequency_filter'] += 1
            
        if metrics['max_shareholder_ratio'] >= config.min_shareholder_ratio:
            stats['passed_ratio_filter'] += 1
            
        if risk_score >= config.min_risk_score:
            stats['passed_risk_filter'] += 1
    
    return stats

# è§£å†³æ–¹æ¡ˆ
diagnostic_stats = diagnose_empty_results(all_loops, config)
print("ç­›é€‰è¯Šæ–­ç»“æœ:", diagnostic_stats)

# æ ¹æ®è¯Šæ–­ç»“æœè°ƒæ•´å‚æ•°
if diagnostic_stats['passed_amount_filter'] == 0:
    print("å»ºè®®é™ä½ min_transaction_amount")
if diagnostic_stats['passed_risk_filter'] == 0:
    print("å»ºè®®é™ä½ min_risk_score")
```

#### 7.1.2 å¤„ç†é€Ÿåº¦è¿‡æ…¢
```python
# é—®é¢˜ï¼šå¤„ç†æ—¶é—´è¶…è¿‡é¢„æœŸ
# ä¼˜åŒ–ç­–ç•¥

def optimize_for_speed(config):
    """é€Ÿåº¦ä¼˜åŒ–é…ç½®"""
    
    # 1. å‡å°‘æ£€æµ‹èŒƒå›´
    config.loop_detection.max_cycle_length = 6  # ä»8é™åˆ°6
    config.loop_detection.max_cycles_to_process = 50000  # å‡å°‘å¤„ç†é‡
    
    # 2. å¯ç”¨å¹¶è¡Œå¤„ç†
    config.loop_detection.enable_multiprocessing = True
    config.loop_detection.max_workers = os.cpu_count()
    
    # 3. æé«˜ç­›é€‰é˜ˆå€¼
    config.loop_filter.min_risk_score = 0.4  # æé«˜é˜ˆå€¼
    config.loop_filter.top_k_results = 50    # å‡å°‘è¾“å‡º
    
    # 4. ç¦ç”¨è¯¦ç»†åˆ†æ
    config.loop_filter.enable_detailed_metrics = False
    
    return config
```

#### 7.1.3 å†…å­˜ä¸è¶³é”™è¯¯
```python
# é—®é¢˜ï¼šå¤„ç†å¤§æ•°æ®é›†æ—¶å†…å­˜æº¢å‡º
# è§£å†³æ–¹æ¡ˆï¼šåˆ†æ‰¹å¤„ç†

def batch_processing(all_loops, config, batch_size=5000):
    """åˆ†æ‰¹å¤„ç†å¤§æ•°æ®é›†"""
    
    all_results = []
    
    for i in range(0, len(all_loops), batch_size):
        batch = all_loops[i:i+batch_size]
        
        print(f"å¤„ç†æ‰¹æ¬¡ {i//batch_size + 1}/{(len(all_loops)-1)//batch_size + 1}")
        
        # å¤„ç†å½“å‰æ‰¹æ¬¡
        batch_results = process_loop_batch(batch, config)
        all_results.extend(batch_results)
        
        # å¼ºåˆ¶åƒåœ¾å›æ”¶
        import gc
        gc.collect()
    
    # æœ€ç»ˆæ’åºå’Œæˆªå–
    all_results.sort(key=lambda x: x['risk_score'], reverse=True)
    return all_results[:config.top_k_results]
```

### 7.2 å‚æ•°è°ƒä¼˜çš„æœ€ä½³å®è·µ

#### 7.2.1 æ¸è¿›å¼å‚æ•°è°ƒæ•´
```python
def progressive_parameter_tuning(all_loops):
    """æ¸è¿›å¼å‚æ•°è°ƒæ•´æµç¨‹"""
    
    # ç¬¬1è½®ï¼šå®½æ¾å‚æ•°ï¼Œäº†è§£æ•°æ®åˆ†å¸ƒ
    config1 = ConfigManager()
    config1.apply_quick_config('loose_mode')
    
    results1 = run_filtering(all_loops, config1)
    analyze_results_distribution(results1)
    
    # ç¬¬2è½®ï¼šæ ¹æ®åˆ†å¸ƒè°ƒæ•´å‚æ•°
    config2 = ConfigManager()
    config2.apply_quick_config('balanced_mode')
    
    # æ ¹æ®ç¬¬1è½®ç»“æœå¾®è°ƒ
    percentiles = calculate_metric_percentiles(results1)
    config2.loop_filter.min_transaction_amount = percentiles['amount_75']
    config2.loop_filter.min_risk_score = percentiles['risk_score_50']
    
    results2 = run_filtering(all_loops, config2)
    
    # ç¬¬3è½®ï¼šç²¾ç»†è°ƒæ•´
    if len(results2) > 100:
        config2.loop_filter.min_risk_score += 0.1  # æé«˜é˜ˆå€¼
    elif len(results2) < 50:
        config2.loop_filter.min_risk_score -= 0.1  # é™ä½é˜ˆå€¼
        
    final_results = run_filtering(all_loops, config2)
    return final_results, config2
```

#### 7.2.2 A/Bæµ‹è¯•æ–¹æ³•
```python
def ab_test_configurations(all_loops, config_a, config_b):
    """A/Bæµ‹è¯•ä¸åŒé…ç½®çš„æ•ˆæœ"""
    
    # éšæœºåˆ†å‰²æ•°æ®
    import random
    random.shuffle(all_loops)
    split_point = len(all_loops) // 2
    
    loops_a = all_loops[:split_point]
    loops_b = all_loops[split_point:]
    
    # æµ‹è¯•é…ç½®A
    results_a = run_filtering(loops_a, config_a)
    metrics_a = evaluate_results(results_a)
    
    # æµ‹è¯•é…ç½®B  
    results_b = run_filtering(loops_b, config_b)
    metrics_b = evaluate_results(results_b)
    
    # æ¯”è¾ƒç»“æœ
    comparison = {
        'config_a': {
            'precision': metrics_a['precision'],
            'recall': metrics_a['recall'], 
            'f1_score': metrics_a['f1_score'],
            'processing_time': metrics_a['time']
        },
        'config_b': {
            'precision': metrics_b['precision'],
            'recall': metrics_b['recall'],
            'f1_score': metrics_b['f1_score'], 
            'processing_time': metrics_b['time']
        }
    }
    
    # æ¨èæœ€ä½³é…ç½®
    if comparison['config_a']['f1_score'] > comparison['config_b']['f1_score']:
        return config_a, comparison
    else:
        return config_b, comparison
```

---

## ğŸ“‹ æ€»ç»“

### æ ¸å¿ƒè¦ç‚¹å›é¡¾

1. **å‚æ•°é…ç½®çš„é‡è¦æ€§**
   - ç›´æ¥å½±å“æ£€æµ‹ç²¾åº¦å’Œå¤„ç†é€Ÿåº¦
   - éœ€è¦æ ¹æ®ä¸šåŠ¡åœºæ™¯å’Œæ•°æ®ç‰¹ç‚¹è°ƒæ•´
   - å»ºè®®ä»å®½æ¾æ¨¡å¼å¼€å§‹ï¼Œé€æ­¥ä¼˜åŒ–

2. **åº•å±‚è®¡ç®—é€»è¾‘**
   - å¤šç»´åº¦æŒ‡æ ‡èåˆçš„é£é™©è¯„åˆ†æœºåˆ¶
   - åŸºäºä¸šåŠ¡é€»è¾‘çš„é˜ˆå€¼ç­›é€‰ç­–ç•¥
   - æ€§èƒ½ä¼˜åŒ–çš„å¹¶è¡Œå¤„ç†æ¶æ„

3. **å®é™…åº”ç”¨ç»éªŒ**
   - 25,235 â†’ 65ä¸ªç¯è·¯çš„æˆåŠŸç­›é€‰æ¡ˆä¾‹
   - 70å€æ€§èƒ½æå‡çš„ä¼˜åŒ–å®è·µ
   - å››ç§é¢„è®¾æ¨¡å¼è¦†ç›–ä¸åŒä¸šåŠ¡åœºæ™¯

4. **æœ€ä½³å®è·µå»ºè®®**
   - æ¸è¿›å¼å‚æ•°è°ƒæ•´
   - A/Bæµ‹è¯•éªŒè¯æ•ˆæœ  
   - æ ¹æ®ç¡¬ä»¶é…ç½®ä¼˜åŒ–æ€§èƒ½
   - æŒç»­ç›‘æ§å’Œæ”¹è¿›

### ä¸‹ä¸€æ­¥è¡ŒåŠ¨å»ºè®®

1. **åˆå­¦è€…**ï¼šä»å¹³è¡¡æ¨¡å¼å¼€å§‹ï¼Œç†Ÿæ‚‰å„é¡¹å‚æ•°çš„ä½œç”¨
2. **è¿›é˜¶ç”¨æˆ·**ï¼šæ ¹æ®ä¸šåŠ¡éœ€æ±‚è‡ªå®šä¹‰å‚æ•°ç»„åˆ
3. **é«˜çº§ç”¨æˆ·**ï¼šå¼€å‘è‡ªåŠ¨åŒ–å‚æ•°è°ƒä¼˜ç®—æ³•

---

*æœ¬æ•™ç¨‹åŸºäºç‰©äº§ä¸­å¤§å›¾é£æ§ç³»ç»Ÿçš„å®é™…é¡¹ç›®ç»éªŒç¼–å†™ï¼Œå‚æ•°è®¾ç½®å’Œä¼˜åŒ–å»ºè®®å‡ç»è¿‡å®æˆ˜éªŒè¯ã€‚å¦‚æœ‰ç–‘é—®ï¼Œè¯·å‚è€ƒç³»ç»Ÿæ–‡æ¡£æˆ–è”ç³»æŠ€æœ¯æ”¯æŒå›¢é˜Ÿã€‚* 