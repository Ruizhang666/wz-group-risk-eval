# åŒ–å·¥å›¾é£æ§ç³»ç»Ÿ - ç‰¹å¾å·¥ç¨‹è®¾è®¡æ–‡æ¡£

## ğŸ“‹ æ–‡æ¡£æ¦‚è¿°

æœ¬æ–‡æ¡£è¯¦ç»†è®°å½•äº†åŒ–å·¥å›¾é£æ§ç³»ç»Ÿä¸­ç‰¹å¾å·¥ç¨‹æ¨¡å—çš„è®¾è®¡æ€è·¯ã€å®ç°æ–¹æ³•å’ŒæŠ€æœ¯ç»†èŠ‚ï¼Œä¸ºåç»­å¼€å‘å’Œç»´æŠ¤æä¾›å‚è€ƒã€‚

**åˆ›å»ºæ—¶é—´**: 2025-05-27  
**æ¨¡å—åç§°**: `feature_engineering.py`  
**ä¸»è¦åŠŸèƒ½**: ä»ç¯è·¯ç»¼åˆç”»åƒæ•°æ®ä¸­æå–ã€æ„é€ å’Œé€‰æ‹©ç‰¹å¾ï¼Œä¸ºå¼‚å¸¸æ£€æµ‹æä¾›é«˜è´¨é‡è¾“å…¥

---

## ğŸ¯ è®¾è®¡ç›®æ ‡

### 1. ä¸šåŠ¡ç›®æ ‡
- **é£é™©è¯†åˆ«**: ä»å¤æ‚çš„è‚¡æƒäº¤æ˜“ç¯è·¯ä¸­è¯†åˆ«æ½œåœ¨é£é™©ç‰¹å¾
- **å¼‚å¸¸æ£€æµ‹**: ä¸ºä¸‹æ¸¸å¼‚å¸¸æ£€æµ‹æ¨¡å‹æä¾›åˆ¤åˆ«æ€§å¼ºçš„ç‰¹å¾
- **æ¨¡å¼å‘ç°**: æŒ–æ˜ç¯è·¯ä¸­éšè—çš„å¯ç–‘äº¤æ˜“æ¨¡å¼

### 2. æŠ€æœ¯ç›®æ ‡
- **ç‰¹å¾ä¸°å¯Œæ€§**: ä»åŸå§‹29ä¸ªç‰¹å¾æ‰©å±•åˆ°49ä¸ªé«˜è´¨é‡ç‰¹å¾
- **æ•°æ®è´¨é‡**: å¤„ç†ç¼ºå¤±å€¼ã€å¼‚å¸¸å€¼ï¼Œç¡®ä¿æ•°æ®å¯é æ€§
- **è®¡ç®—æ•ˆç‡**: æ‰¹é‡å¤„ç†25,235ä¸ªç¯è·¯ï¼Œè¿è¡Œæ—¶é—´æ§åˆ¶åœ¨åˆç†èŒƒå›´

---

## ğŸ—ï¸ æ•´ä½“æ¶æ„

```
ç‰¹å¾å·¥ç¨‹æµç¨‹
â”œâ”€â”€ æ•°æ®åŠ è½½ä¸é¢„å¤„ç†
â”‚   â”œâ”€â”€ è¯»å–ç»¼åˆç”»åƒæ•°æ®
â”‚   â”œâ”€â”€ è¯†åˆ«å¹¶ç§»é™¤å­—ç¬¦ä¸²ç±»å‹åˆ—
â”‚   â””â”€â”€ æ•°æ®è´¨é‡æ£€æŸ¥
â”œâ”€â”€ ç¼ºå¤±å€¼å¤„ç†
â”‚   â”œâ”€â”€ æŒ‰ç‰¹å¾ç±»å‹åˆ†ç±»å¤„ç†
â”‚   â””â”€â”€ ä¸šåŠ¡é€»è¾‘é©±åŠ¨çš„å¡«å……ç­–ç•¥
â”œâ”€â”€ ç‰¹å¾å˜æ¢
â”‚   â”œâ”€â”€ å¯¹æ•°å˜æ¢ (å¤„ç†åæ€åˆ†å¸ƒ)
â”‚   â”œâ”€â”€ å¹³æ–¹æ ¹å˜æ¢ (è®¡æ•°ç±»ç‰¹å¾)
â”‚   â”œâ”€â”€ Box-Coxå˜æ¢ (è‡ªåŠ¨æœ€ä½³å˜æ¢)
â”‚   â””â”€â”€ æ ‡å‡†åŒ– (Z-score, Min-Max, Robust)
â”œâ”€â”€ ç‰¹å¾æ„é€ 
â”‚   â”œâ”€â”€ æ¯”ç‡ç‰¹å¾ (ç›¸å¯¹å…³ç³»)
â”‚   â”œâ”€â”€ ç»Ÿè®¡ç‰¹å¾ (æè¿°æ€§ç»Ÿè®¡)
â”‚   â”œâ”€â”€ äº¤äº’ç‰¹å¾ (å¤šç»´åº¦å…³è”)
â”‚   â””â”€â”€ å¼‚å¸¸è¯„åˆ†ç‰¹å¾ (é£é™©æŒ‡æ ‡)
â”œâ”€â”€ ç‰¹å¾é€‰æ‹©
â”‚   â”œâ”€â”€ æ–¹å·®è¿‡æ»¤ (å»é™¤ä½å˜å¼‚ç‰¹å¾)
â”‚   â”œâ”€â”€ ç›¸å…³æ€§è¿‡æ»¤ (å»é™¤å†—ä½™ç‰¹å¾)
â”‚   â””â”€â”€ äº’ä¿¡æ¯é€‰æ‹© (ä¿ç•™ä¿¡æ¯é‡å¤§çš„ç‰¹å¾)
â””â”€â”€ ç»“æœè¾“å‡º
    â”œâ”€â”€ ç‰¹å¾çŸ©é˜µæ–‡ä»¶
    â”œâ”€â”€ ç‰¹å¾é‡è¦æ€§æŠ¥å‘Š
    â””â”€â”€ å…ƒæ•°æ®æ–‡ä»¶
```

---

## ğŸ“Š ç‰¹å¾åˆ†ç±»ä½“ç³»

### 1. åŸå§‹ç‰¹å¾åˆ†ç±»

#### ğŸ“ˆ äº¤æ˜“ç‰¹å¾ (Transaction Features)
```python
transaction_features = [
    'total_transaction_amount',              # æ€»äº¤æ˜“é‡‘é¢
    'upstream_to_member_transaction_amount', # ä¸Šæ¸¸åˆ°æˆå‘˜äº¤æ˜“é‡‘é¢
    'member_to_downstream_transaction_amount', # æˆå‘˜åˆ°ä¸‹æ¸¸äº¤æ˜“é‡‘é¢
    'upstream_to_member_avg_amount',         # ä¸Šæ¸¸å¹³å‡äº¤æ˜“é‡‘é¢
    'member_to_downstream_avg_amount',       # ä¸‹æ¸¸å¹³å‡äº¤æ˜“é‡‘é¢
    'upstream_to_member_transaction_count',  # ä¸Šæ¸¸äº¤æ˜“æ¬¡æ•°
    'member_to_downstream_transaction_count' # ä¸‹æ¸¸äº¤æ˜“æ¬¡æ•°
]
```

#### ğŸ¢ è‚¡æƒç‰¹å¾ (Equity Features)
```python
equity_features = [
    'max_ownership_percent',        # æœ€å¤§æ§è‚¡æ¯”ä¾‹
    'min_ownership_percent',        # æœ€å°æ§è‚¡æ¯”ä¾‹
    'avg_ownership_percent',        # å¹³å‡æ§è‚¡æ¯”ä¾‹
    'ownership_concentration_index', # æ§è‚¡é›†ä¸­åº¦æŒ‡æ•°
    'total_ownership_percent',      # æ€»æ§è‚¡æ¯”ä¾‹
    'ownership_count'               # æ§è‚¡å…³ç³»æ•°é‡
]
```

#### ğŸ•¸ï¸ ç½‘ç»œç‰¹å¾ (Network Features)
```python
network_features = [
    'max_degree_centrality',        # æœ€å¤§åº¦ä¸­å¿ƒæ€§
    'max_betweenness_centrality',   # æœ€å¤§ä»‹æ•°ä¸­å¿ƒæ€§
    'max_closeness_centrality',     # æœ€å¤§æ¥è¿‘ä¸­å¿ƒæ€§
    'network_density',              # ç½‘ç»œå¯†åº¦
    'avg_degree'                    # å¹³å‡åº¦æ•°
]
```

#### ğŸ—ï¸ ç»“æ„ç‰¹å¾ (Structure Features)
```python
structure_features = [
    'loop_node_count',      # ç¯è·¯èŠ‚ç‚¹æ•°
    'loop_path_length',     # ç¯è·¯è·¯å¾„é•¿åº¦
    'loop_complexity_score', # ç¯è·¯å¤æ‚åº¦è¯„åˆ†
    'natural_person_count', # è‡ªç„¶äººæ•°é‡
    'enterprise_count',     # ä¼ä¸šæ•°é‡
    'total_shareholders'    # æ€»è‚¡ä¸œæ•°
]
```

---

## ğŸ”§ æ ¸å¿ƒæŠ€æœ¯æ–¹æ³•

### 1. æ•°æ®é¢„å¤„ç†

#### å­—ç¬¦ä¸²åˆ—å¤„ç†
```python
# é—®é¢˜ï¼šæŸäº›åˆ—åŒ…å«å­—ç¬¦ä¸²æ ¼å¼çš„æ—¥æœŸåˆ—è¡¨
# è§£å†³ï¼šåœ¨åŠ è½½æ—¶è¯†åˆ«å¹¶ç§»é™¤è¿™äº›åˆ—
string_columns = [
    'upstream_to_member_transaction_times',    # "['2024-01-01', '2024-02-01']"
    'member_to_downstream_transaction_times',  # "['2024-05-01', '2024-09-01']"
    'key_node_id',                            # èŠ‚ç‚¹IDå­—ç¬¦ä¸²
    'dominant_shareholder_type'               # åˆ†ç±»æ ‡ç­¾
]
```

#### æ•°å€¼ç‰¹å¾éªŒè¯
```python
# ä¸¥æ ¼çš„æ•°å€¼ç‰¹å¾æ£€æŸ¥ï¼Œé¿å…ç±»å‹é”™è¯¯
for col in feature_cols:
    try:
        pd.to_numeric(self.df[col], errors='raise')
        numeric_feature_cols.append(col)
    except (ValueError, TypeError):
        self.logger.warning(f"è·³è¿‡éæ•°å€¼åˆ—: {col}")
```

### 2. ç¼ºå¤±å€¼å¤„ç†ç­–ç•¥

#### ä¸šåŠ¡é©±åŠ¨çš„å¡«å……æ–¹æ³•
```python
# 1. äº¤æ˜“ç‰¹å¾ï¼šç¼ºå¤± â†’ 0 (è¡¨ç¤ºæ— äº¤æ˜“)
if col in self.transaction_features:
    self.df[col].fillna(0, inplace=True)

# 2. è‚¡æƒç‰¹å¾ï¼šç¼ºå¤± â†’ ä¸­ä½æ•° (ç¨³å¥ç»Ÿè®¡é‡)
elif col in self.equity_features:
    self.df[col].fillna(self.df[col].median(), inplace=True)

# 3. ç½‘ç»œç‰¹å¾ï¼šç¼ºå¤± â†’ å‡å€¼ (ç½‘ç»œç»“æ„ç‰¹æ€§)
elif col in self.network_features:
    self.df[col].fillna(self.df[col].mean(), inplace=True)

# 4. å…¶ä»–ç‰¹å¾ï¼šå‰å‘å¡«å…… + é›¶å¡«å……
else:
    self.df[col].fillna(method='ffill', inplace=True)
    self.df[col].fillna(0, inplace=True)
```

### 3. ç‰¹å¾å˜æ¢æŠ€æœ¯

#### å¯¹æ•°å˜æ¢ (Log Transformation)
```python
# ç›®çš„ï¼šå¤„ç†åæ€åˆ†å¸ƒï¼Œç‰¹åˆ«æ˜¯é‡‘é¢ç±»ç‰¹å¾
# æ–¹æ³•ï¼šlog1p(x) = log(1+x) é¿å…log(0)
# æ•ˆæœè¯„ä¼°ï¼šæ¯”è¾ƒå˜æ¢å‰åååº¦

for col in self.transaction_features:
    new_col = f"{col}_log"
    self.df[new_col] = np.log1p(self.df[col])
    
    original_skew = abs(skew(self.df[col].dropna()))
    log_skew = abs(skew(self.df[new_col].dropna()))
    
    if log_skew < original_skew:
        # å˜æ¢æœ‰æ•ˆï¼Œä¿ç•™ç‰¹å¾
        self.logger.info(f"{col} å¯¹æ•°å˜æ¢åååº¦ä» {original_skew:.2f} é™è‡³ {log_skew:.2f}")
```

#### Box-Coxè‡ªé€‚åº”å˜æ¢
```python
# ç›®çš„ï¼šè‡ªåŠ¨å¯»æ‰¾æœ€ä½³å˜æ¢å‚æ•°
# é€‚ç”¨ï¼šæ­£å€¼æ•°æ®
# ä¼˜åŠ¿ï¼šæ•°æ®é©±åŠ¨çš„æœ€ä¼˜å˜æ¢

for col in self.numeric_features[:5]:
    if self.df[col].min() > 0:
        try:
            transformed_data, lambda_param = stats.boxcox(self.df[col])
            new_col = f"{col}_boxcox"
            self.df[new_col] = transformed_data
            self.logger.info(f"{col} Box-Coxå˜æ¢ï¼Œlambda={lambda_param:.3f}")
        except:
            pass
```

#### å¤šç§æ ‡å‡†åŒ–æ–¹æ³•
```python
# 1. Z-scoreæ ‡å‡†åŒ–ï¼šé€‚ç”¨äºæ­£æ€åˆ†å¸ƒ
scaler_standard = StandardScaler()
scaled_features = scaler_standard.fit_transform(self.df[features_to_scale])

# 2. Min-Maxæ ‡å‡†åŒ–ï¼šç¼©æ”¾åˆ°[0,1]åŒºé—´
scaler_minmax = MinMaxScaler()
minmax_features = scaler_minmax.fit_transform(self.df[self.numeric_features])

# 3. Robustæ ‡å‡†åŒ–ï¼šå¯¹å¼‚å¸¸å€¼ä¸æ•æ„Ÿ
scaler_robust = RobustScaler()
robust_features = scaler_robust.fit_transform(self.df[self.numeric_features])
```

### 4. ç‰¹å¾æ„é€ ç­–ç•¥

#### æ¯”ç‡ç‰¹å¾ (Ratio Features)
```python
# æ ¸å¿ƒæ€æƒ³ï¼šç›¸å¯¹å…³ç³»æ¯”ç»å¯¹æ•°å€¼æ›´å…·åˆ¤åˆ«æ€§

# 1. ä¸Šä¸‹æ¸¸äº¤æ˜“å¹³è¡¡æ€§
self.df['upstream_downstream_amount_ratio'] = (
    self.df['upstream_to_member_transaction_amount'] / 
    self.df['member_to_downstream_transaction_amount'].replace(0, 1e-6)
)

# 2. å¯¹æ•°æ¯”ç‡ï¼ˆæ›´ç¨³å®šï¼‰
self.df['upstream_downstream_amount_log_ratio'] = (
    np.log1p(self.df['upstream_to_member_transaction_amount']) - 
    np.log1p(self.df['member_to_downstream_transaction_amount'])
)

# 3. äº¤æ˜“é›†ä¸­åº¦
self.df['upstream_concentration'] = (
    self.df['upstream_to_member_transaction_amount'] / 
    self.df['total_transaction_amount'].replace(0, 1e-6)
)
```

#### ç»Ÿè®¡ç‰¹å¾ (Statistical Features)
```python
# ç›®çš„ï¼šæ•æ‰æ•°æ®åˆ†å¸ƒç‰¹æ€§

# 1. å˜å¼‚ç³»æ•° (CV) - ç›¸å¯¹ç¦»æ•£ç¨‹åº¦
self.df['amount_cv'] = (
    self.df[amount_cols].std(axis=1) / 
    (self.df[amount_cols].mean(axis=1) + 1e-6)
)

# 2. ååº¦å’Œå³°åº¦ - åˆ†å¸ƒå½¢çŠ¶
self.df['amount_kurtosis'] = self.df[amount_cols].apply(lambda x: kurtosis(x), axis=1)
self.df['amount_skewness'] = self.df[amount_cols].apply(lambda x: skew(x), axis=1)

# 3. ä¿¡æ¯ç†µ - ä¿¡æ¯å¤æ‚åº¦
self.df['ownership_entropy'] = self.df[ownership_cols].apply(
    lambda x: -np.sum(x * np.log(x + 1e-10)) if x.sum() > 0 else 0, axis=1
)
```

#### äº¤äº’ç‰¹å¾ (Interaction Features)
```python
# ç›®çš„ï¼šæ•æ‰ä¸åŒç»´åº¦ä¹‹é—´çš„ç›¸äº’ä½œç”¨

# 1. äº¤æ˜“ä¸è‚¡æƒçš„äº¤äº’ - é«˜é£é™©ç»„åˆ
self.df['high_amount_high_ownership'] = (
    self.df['total_transaction_amount'] * self.df['max_ownership_percent']
)

# 2. ç½‘ç»œç»“æ„ä¸äº¤æ˜“çš„äº¤äº’ - å¯†é›†ç½‘ç»œä¸­çš„é«˜é¢äº¤æ˜“
self.df['dense_network_high_amount'] = (
    self.df['network_density'] * np.log1p(self.df['total_transaction_amount'])
)

# 3. æ§åˆ¶ç±»å‹ä¸äº¤æ˜“æ¨¡å¼çš„äº¤äº’ - è‡ªç„¶äººæ§åˆ¶ä¸‹çš„äº¤æ˜“ä¸å¹³è¡¡
self.df['natural_person_transaction_imbalance'] = (
    self.df['natural_person_ratio'] * 
    abs(np.log1p(self.df['upstream_downstream_amount_ratio']))
)
```

#### å¼‚å¸¸è¯„åˆ†ç‰¹å¾ (Anomaly Score Features)
```python
# ç›®çš„ï¼šæå‰è¯†åˆ«å¼‚å¸¸æ¨¡å¼

# 1. Z-scoreå¼‚å¸¸è¯„åˆ†
z_scores = np.abs(stats.zscore(self.df[col].fillna(self.df[col].median())))
self.df[f'{col}_zscore_anomaly'] = z_scores

# 2. IQRå¼‚å¸¸è¯„åˆ†
Q1, Q3 = self.df[col].quantile([0.25, 0.75])
IQR = Q3 - Q1
lower_bound, upper_bound = Q1 - 1.5 * IQR, Q3 + 1.5 * IQR

self.df[f'{col}_iqr_anomaly'] = (
    (self.df[col] < lower_bound) | (self.df[col] > upper_bound)
).astype(int)

# 3. å¤šå˜é‡å¼‚å¸¸è¯„åˆ† (Elliptic Envelope)
detector = EllipticEnvelope(contamination=0.1, random_state=42)
anomaly_scores = detector.score_samples(X)
self.df['multivariate_anomaly_score'] = -anomaly_scores
```

### 5. ç‰¹å¾é€‰æ‹©æ–¹æ³•

#### ä¸‰å±‚è¿‡æ»¤ç­–ç•¥
```python
# ç¬¬ä¸€å±‚ï¼šæ–¹å·®è¿‡æ»¤
selector = VarianceThreshold(threshold=0.01)
low_variance_features = [col for col, keep in zip(cols, selector.get_support()) if not keep]

# ç¬¬äºŒå±‚ï¼šç›¸å…³æ€§è¿‡æ»¤
correlation_matrix = self.df[numeric_feature_cols].corr().abs()
high_corr_features = find_correlated_features(correlation_matrix, threshold=0.95)

# ç¬¬ä¸‰å±‚ï¼šäº’ä¿¡æ¯é€‰æ‹©
mi_scores = mutual_info_regression(X, y, random_state=42)
top_features = select_top_features_by_mi(mi_scores, keep_ratio=0.8)
```

---

## ğŸ“ˆ æ€§èƒ½æŒ‡æ ‡

### è¿è¡Œæ€§èƒ½
- **æ•°æ®è§„æ¨¡**: 25,235ä¸ªç¯è·¯ Ã— 34ä¸ªåŸå§‹ç‰¹å¾
- **å¤„ç†æ—¶é—´**: ~21ç§’ (åŒ…å«ç‰¹å¾å·¥ç¨‹å…¨æµç¨‹)
- **å†…å­˜ä½¿ç”¨**: ç¨³å®šåœ¨åˆç†èŒƒå›´å†…
- **æ‰©å±•æ€§**: æ”¯æŒæ›´å¤§è§„æ¨¡æ•°æ®å¤„ç†

### ç‰¹å¾è´¨é‡
- **åŸå§‹ç‰¹å¾**: 29ä¸ªæ•°å€¼ç‰¹å¾
- **ç”Ÿæˆç‰¹å¾**: 196ä¸ªå·¥ç¨‹ç‰¹å¾
- **æœ€ç»ˆç‰¹å¾**: 49ä¸ªé«˜è´¨é‡ç‰¹å¾ (ç»è¿‡é€‰æ‹©)
- **ç‰¹å¾å‹ç¼©æ¯”**: 4:1 (196â†’49)

### ç‰¹å¾åˆ†å¸ƒ
```json
{
    "original": 15,      // åŸå§‹ç‰¹å¾
    "transformed": 18,   // å˜æ¢ç‰¹å¾
    "ratio": 8,         // æ¯”ç‡ç‰¹å¾
    "statistical": 12,   // ç»Ÿè®¡ç‰¹å¾
    "interaction": 6,    // äº¤äº’ç‰¹å¾
    "anomaly": 3        // å¼‚å¸¸è¯„åˆ†ç‰¹å¾
}
```

---

## ğŸš¨ é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ

### 1. å­—ç¬¦ä¸²æ•°æ®ç±»å‹é—®é¢˜

**é—®é¢˜æè¿°**:
```
ValueError: could not convert string to float: "['2024-01-01', '2024-02-01']"
```

**æ ¹æœ¬åŸå› **:
- æ•°æ®ä¸­åŒ…å«å­—ç¬¦ä¸²æ ¼å¼çš„æ—¥æœŸåˆ—è¡¨
- ç‰¹å¾é€‰æ‹©æ—¶è¢«è¯¯è¯†åˆ«ä¸ºæ•°å€¼ç‰¹å¾
- `mutual_info_regression`æ— æ³•å¤„ç†å­—ç¬¦ä¸²æ•°æ®

**è§£å†³æ–¹æ¡ˆ**:
```python
# 1. é¢„å…ˆè¯†åˆ«å¹¶ç§»é™¤å­—ç¬¦ä¸²åˆ—
string_columns = [
    'upstream_to_member_transaction_times',
    'member_to_downstream_transaction_times',
    'key_node_id',
    'dominant_shareholder_type'
]

# 2. ä¸¥æ ¼çš„æ•°å€¼éªŒè¯
for col in feature_cols:
    try:
        pd.to_numeric(self.df[col], errors='raise')
        numeric_feature_cols.append(col)
    except (ValueError, TypeError):
        continue

# 3. ç‰¹å¾é€‰æ‹©å‰çš„äºŒæ¬¡æ£€æŸ¥
X = self.df[remaining_features].select_dtypes(include=[np.number]).fillna(0)
```

### 2. ç¼ºå¤±å€¼å¤„ç†ç­–ç•¥

**æŒ‘æˆ˜**: ä¸åŒç±»å‹ç‰¹å¾çš„ç¼ºå¤±å€¼å«ä¹‰ä¸åŒ  
**è§£å†³**: ä¸šåŠ¡é©±åŠ¨çš„åˆ†ç±»å¤„ç†ç­–ç•¥

### 3. ç‰¹å¾çˆ†ç‚¸é—®é¢˜

**æŒ‘æˆ˜**: ç‰¹å¾å·¥ç¨‹åç»´åº¦æ¿€å¢ (29â†’196)  
**è§£å†³**: ä¸‰å±‚ç‰¹å¾é€‰æ‹©ç­–ç•¥ï¼Œæœ€ç»ˆä¿ç•™49ä¸ªæ ¸å¿ƒç‰¹å¾

---

## ğŸ“ è¾“å‡ºæ–‡ä»¶è¯´æ˜

### ä¸»è¦è¾“å‡ºæ–‡ä»¶
```
outputs/anomaly_detection/features/
â”œâ”€â”€ engineered_features.csv          # å·¥ç¨‹åŒ–ç‰¹å¾çŸ©é˜µ (25235Ã—50)
â”œâ”€â”€ feature_importance_report.csv    # ç‰¹å¾é‡è¦æ€§ç»Ÿè®¡æŠ¥å‘Š
â”œâ”€â”€ feature_list.txt                 # ç‰¹å¾åç§°åˆ—è¡¨
â”œâ”€â”€ feature_metadata.json            # ç‰¹å¾å…ƒæ•°æ®
â””â”€â”€ logs/
    â””â”€â”€ feature_engineering.log      # è¯¦ç»†è¿è¡Œæ—¥å¿—
```

### ç‰¹å¾å…ƒæ•°æ®ç¤ºä¾‹
```json
{
    "total_loops": 25235,
    "total_features": 49,
    "feature_categories": {
        "original": 15,
        "transformed": 18,
        "ratio": 8,
        "statistical": 12,
        "interaction": 6,
        "anomaly": 3
    }
}
```

---

## ğŸ”„ æ‰©å±•ä¸ä¼˜åŒ–å»ºè®®

### 1. æ—¶é—´åºåˆ—ç‰¹å¾
```python
# å»ºè®®ï¼šå¦‚æœæœ‰æ—¶é—´ä¿¡æ¯ï¼Œå¯ä»¥æ·»åŠ 
- äº¤æ˜“æ—¶é—´é—´éš”ç‰¹å¾
- äº¤æ˜“é¢‘ç‡å˜åŒ–ç‰¹å¾  
- å­£èŠ‚æ€§æ¨¡å¼ç‰¹å¾
```

### 2. å›¾ç»“æ„ç‰¹å¾
```python
# å»ºè®®ï¼šæ·±åŒ–ç½‘ç»œåˆ†æ
- èŠ‚ç‚¹é‡è¦æ€§æ’å
- ç¤¾åŒºæ£€æµ‹ç»“æœ
- æœ€çŸ­è·¯å¾„ç‰¹å¾
```

### 3. æ–‡æœ¬ç‰¹å¾
```python
# å»ºè®®ï¼šå¦‚æœæœ‰å®ä½“åç§°ä¿¡æ¯
- å®ä½“åç§°ç›¸ä¼¼åº¦
- è¡Œä¸šåˆ†ç±»ç‰¹å¾
- åœ°ç†ä½ç½®ç‰¹å¾
```

### 4. æ·±åº¦å­¦ä¹ ç‰¹å¾
```python
# å»ºè®®ï¼šä½¿ç”¨è‡ªåŠ¨ç‰¹å¾å­¦ä¹ 
- å›¾ç¥ç»ç½‘ç»œåµŒå…¥
- è‡ªç¼–ç å™¨ç‰¹å¾
- å¯¹æŠ—æ€§ç‰¹å¾å­¦ä¹ 
```

---

## ğŸ“š å‚è€ƒèµ„æ–™ä¸ä¾èµ–

### æ ¸å¿ƒä¾èµ–åº“
```python
pandas >= 1.3.0          # æ•°æ®å¤„ç†
numpy >= 1.21.0          # æ•°å€¼è®¡ç®—
scikit-learn >= 1.0.0    # æœºå™¨å­¦ä¹ å·¥å…·
scipy >= 1.7.0           # ç§‘å­¦è®¡ç®—
```

### å…³é”®ç®—æ³•
- **Box-Coxå˜æ¢**: æœ€å¤§ä¼¼ç„¶ä¼°è®¡æœ€ä¼˜å˜æ¢å‚æ•°
- **äº’ä¿¡æ¯**: è¡¡é‡ç‰¹å¾ä¸ç›®æ ‡å˜é‡çš„éçº¿æ€§å…³ç³»
- **æ¤­åœ†åŒ…ç»œ**: å¤šå˜é‡å¼‚å¸¸æ£€æµ‹ç®—æ³•
- **æ–¹å·®é˜ˆå€¼**: åŸºäºæ–¹å·®çš„ç‰¹å¾é€‰æ‹©

### è®¾è®¡æ¨¡å¼
- **ç­–ç•¥æ¨¡å¼**: ä¸åŒç±»å‹ç‰¹å¾é‡‡ç”¨ä¸åŒå¤„ç†ç­–ç•¥
- **æ¨¡æ¿æ–¹æ³•**: æ ‡å‡†åŒ–çš„ç‰¹å¾å·¥ç¨‹æµç¨‹
- **å·¥å‚æ¨¡å¼**: æ ¹æ®ç‰¹å¾ç±»å‹åˆ›å»ºç›¸åº”å¤„ç†å™¨

---

## ğŸ“ ç»´æŠ¤æ—¥å¿—

| ç‰ˆæœ¬ | æ—¥æœŸ | ä¿®æ”¹å†…å®¹ | ä¿®æ”¹äºº |
|------|------|----------|--------|
| v1.0 | 2025-05-27 | åˆå§‹ç‰ˆæœ¬ï¼Œå®ç°åŸºç¡€ç‰¹å¾å·¥ç¨‹æµç¨‹ | ç³»ç»Ÿå¼€å‘è€… |
| v1.1 | 2025-05-27 | ä¿®å¤å­—ç¬¦ä¸²æ•°æ®ç±»å‹é—®é¢˜ | ç³»ç»Ÿå¼€å‘è€… |

---

**ğŸ“§ è”ç³»æ–¹å¼**: å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·æŸ¥çœ‹é¡¹ç›®æ—¥å¿—æ–‡ä»¶æˆ–è”ç³»å¼€å‘å›¢é˜Ÿã€‚

**âš–ï¸ å…è´£å£°æ˜**: æœ¬æ–‡æ¡£ä»…ä¾›æŠ€æœ¯å‚è€ƒï¼Œå…·ä½“å®ç°ç»†èŠ‚ä»¥ä»£ç ä¸ºå‡†ã€‚ 